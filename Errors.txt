Примерный список ошибок:
1. Проблемы с запросами к БД
2. Проверка ($_SESSION['auth'] == true) вызывает ошибку
3. Сам js строился на том, что формировалась строка по типу "7+2*3-4"и функцией eval она приводилась к результату вычисления.
С помощью ajax хотел сделать обращение к api.php, где тем же eval и находилось бы значение.
Но вот с ajaxом я ещё не до конца разобрался.